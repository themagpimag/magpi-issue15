improve the performance of the emulator and reduce the compile time.
